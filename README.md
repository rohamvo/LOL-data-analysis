# LOL-data-analysis
Using Riot api to collect data, develop champion recommendations, win/lose factor analysis, and item recommendation models based on the collected data
![슬라이드0001](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/73af2642-0f9b-4240-a185-2e550fe734a3)
![슬라이드0002](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/1e8eb3ab-870f-40ca-8382-88f80dbb9ea0)
![슬라이드0003](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/f1a2acbf-45fc-4307-a8c4-e3e5a642a26e)
![슬라이드0004](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/2e5ddff2-3bcc-4d78-ba30-5319ccf07014)
![슬라이드0005](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/5797ea51-732f-49b7-944a-388cf50cffd2)
![슬라이드0006](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/d7f08d67-c8a7-4557-8805-5d44374f679c)
![슬라이드0007](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/0bacc0d6-6b51-4fce-b1ec-52385d3c8012)
![슬라이드0008](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/f5d6cb8d-36b4-4117-b175-4796e3741045)
![슬라이드0009](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/b36ffd55-9463-4299-b619-92f3f7db125b)
![슬라이드0010](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/352f369f-ed7c-4787-8078-a17f1e78cf6c)
![슬라이드0011](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/9c57cb72-23e3-440c-86f1-b99f6248e8e5)
![슬라이드0012](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/da22f641-2189-4e31-9917-22a8ca216f43)
![슬라이드0013](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/9321f5c3-e86f-4fa1-9c3e-bfa10f668afd)
![슬라이드0014](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/a8fca02f-a340-40f3-8a14-0962b1db7ed8)
![슬라이드0015](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/fe4a3a69-2844-472d-8215-60b56592e622)
![슬라이드0016](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/ede59b26-26a1-4289-b347-247f154d7fa4)
본인의 챔피언만 입력할 경우 상대하기 쉬운 챔피언 TOP 5, 상대하기 어려운 챔피언 TOP 5 의 챔피언 이름과 승률 통계를 출력하는 함수 구현 화면
![슬라이드0017](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/078aa99e-ddee-4f49-978f-3b385bd7cf55)
![슬라이드0018](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/9cadd3f0-9f46-4442-9b93-4093d1070e5a)
![슬라이드0019](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/0d122498-11c4-4497-9c48-6a5b47fb600c)
![슬라이드0020](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/2f851b5d-a371-41b0-b1e9-e51379474b19)
![슬라이드0021](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/26d38096-15aa-4c17-89db-fdb7037754e4)
![슬라이드0022](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/7b46be64-2f9a-4687-bc40-07a599983bd7)
![슬라이드0023](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/dcab1183-72ea-4cba-99cd-18095cc77b01)
![슬라이드0024](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/652e828b-a93e-430a-8d45-f5d47b633f79)
![슬라이드0025](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/646a18ca-e004-4195-a3b3-41f356d9720e)
![슬라이드0026](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/488ead66-74fe-4f44-829e-1d565cc8d71b)
![슬라이드0027](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/5687633c-1522-45ce-9cb2-de6883d9ae12)
![슬라이드0028](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/00b80a00-ef1b-48f5-b24c-ee987b889f7b)
![슬라이드0029](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/ecd3c9b3-8424-4442-a5c7-e5f7283bbb07)
![슬라이드0030](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/50299c82-06dd-49ee-b222-643222949555)
![슬라이드0031](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/e68acb93-09bf-470f-9f6f-d0121186bde8)
![슬라이드0032](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/2312a8d8-5031-45ab-96e7-63dcaa9605e8)
![슬라이드0033](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/874cf59c-fde6-4478-a682-475276a98838)
![슬라이드0034](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/a1f9f2f5-27f7-4d82-8b66-34cd239459a5)
![슬라이드0035](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/31185121-0c81-4e9d-a39a-8672bcf2fab2)
![슬라이드0036](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/16a7a06d-e84f-4149-8448-25bb5572d213)
![슬라이드0037](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/ffdb169e-e2ef-404d-bd2c-f4908370583f)
![슬라이드0038](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/dbdb2596-bca7-43fc-bef1-be8867845916)
![슬라이드0039](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/f4f291b5-83de-445f-ba33-1fb2bdf85d11)
![슬라이드0040](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/d77b4540-f644-4923-905e-a9695648f727)
![슬라이드0041](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/47f37fe9-c9d4-4f07-8642-7120e3cb83c0)
![슬라이드0042](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/4da02263-539d-49a0-bf1b-4015e5b76848)
![슬라이드0043](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/eaf5cf66-ebfb-4adb-a69c-90cf1c8050f3)
![슬라이드0044](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/f4f7b3ce-b32e-4b4f-a659-8f5e8b8ab18d)
![슬라이드0045](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/b6e2a70f-0695-4217-bba6-d0e701ae7bee)

왼쪽부터 시작아이템, 신발, 완제품 아이템의 사용빈도 나타냅니다. 실제로 op.gg에서 상위티어유저들이 플레이한 가렌의 데이터를 통계 낸 것입니다.
![슬라이드0046](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/991526c4-65b4-492f-8589-18a75b1a60eb)
![슬라이드0047](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/549985c6-287c-4fc4-8325-f3db7df9a637)

앞에서 가져온 메인룬 서브룬, 스펠을 통계낸 자료입니다. 가장 많이 선택받은 것을 추려냈습니다.
![슬라이드0048](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/f1ff0865-cbd4-4f0b-b6c0-0e861bca052e)

상위 티어 유저들의 게임 기록 통계를 기반으로 한 아이템 추천 함수 화면입니다.
![슬라이드0049](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/d067d022-1696-4903-a8ac-a0326533241d)
![슬라이드0050](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/5c93b0c1-4f60-4377-934f-a7c419c7a680)

총 162개의 챔피언을 128차원(임의로 설정)으로 embedding하고, 사용할  x데이터에 내챔피언, 아군4명, 적군5명으로 구성되었기 때문에 lookup table을 생성해주었습니다. 
먼저 첫줄에서 (1,128)짜리 필터 64개를 사용하여 특징을 추출해주었습니다. 이부분은 본인 챔피언이 무엇인지 인식해줄 것입니다. 이후로 글로벌 에버리지 풀링을 해주었습니다. 
마찬가지로 아군인 2~5번째줄에서 (4,128)짜리 필터 64개를 사용하여 특징을 추출해주었습니다. 이후로 클로벌 에버리지 풀링을 해주었습니다. 이부분은 아군4명의 챔피언이 무엇인지 인식해줄 것입니다.
마지막으로 6~10번째줄에서 (5,128)짜리 필터 64개를 사용하여 특징을 추출해주었습니다. 이부분은 적군5명의 챔피언이 무엇인지 인식해줄 것입니다.
![슬라이드0051](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/619c2466-b8b5-4fc6-b74a-5432088ecfa5)

생성된 lookup table로 인코더를 구성하였습니다.  128 차원, 64개 필터를 사용하여 내 챔피언 1개. 아군 챔피언 4개, 적 챔피언 5개를 분류하였습니다.  글로벌 에버리지 풀링단계를 지나면 1개의 벡터를 생성하여 최종적으로 concat을 통하여 하나의 벡터로 만들었습니다.
![슬라이드0052](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/7cc2c45e-8874-41b9-8d98-66a01fe6957c)

생성된 lookup table로 인코더를 구성하였습니다. 챔피언은 162개라 원래 162여야하지만, 임베딩오류로 인하여 Vocab_size만 2000으로 넉넉히 수정해주었습니다.
여기서 conv1,v2,v3는 앞에서 lookup table 에서 본 내 챔피언, 4개의 아군 챔피언, 5개의 적군 챔피언입니다. 그후로 글로벌, 컨캣을 통해서 context vector H를 생성하였습니다.
![슬라이드0053](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/8c7d8ad4-833c-4a27-b14c-41a1670f10df)

모델은 GRU를 사용하였습니다.(gated recurrent unit) LSTM과 성능은 비슷하지만 Cell state가 없이 hidden state만 존재하기 때문에 속도면에서 우수하기 때문입니다. (update, reset 게이트만 가지고있음)
Test 때는 교사강요를 사용하지 않기때문에 이전스텝의 예측값이 다음스텝의 입력값으로 들어갑니다. 예측값이 다음스템의 입력으로 들어가서 또 예측을 하고 또 다시 다음스템의 입력값으로 들어가다 eos 토큰이 만들어지면 자동으로 멈춥니다.
교사 강요는 (n-1) 스텝의 예측 값을 n 스텝의 입력값으로 사용하는 것이 아니라 (n-1) 스텝의 실제값을 n 스텝의 입력값으로 넣어주는 방식입니다
![슬라이드0054](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/9af36a2b-4735-4e28-aca3-c1a3ac648059)

하지만 train 시에는 교사강요를 사용해주었기때문에, 실제 정답을 입력값으로 사용합니다.
여기서는 y1을 입력으로 사용하는게 아니라 정답지처럼 받아왔던 item 1을 입력값으로 사용합니다. Item들은 실제 정답으로 저희가 처음부터 모델에 직접 알려준 값들입니다. 
![슬라이드0055](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/0ebed4de-3e52-4714-8789-db53f04d9c43)
![슬라이드0056](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/42b9e4c9-1670-4fd8-a120-e648e597bd90)

가장큰 차이점은 파란부분입니다.  앞에서 말씀드린것 같이 훈련시에는 input으로 실제정답도 받아옵니다. 예측된 y값을 입력값으로 사용하지 않습니다. 하지만, test시에는 input으로 정답을 받아오지않고, 이전스텝에서 예측한 y를 다음스텝의 입력값으로 사용합니다. 디코더가 예측한 y를 softmax를 사용해 추천아이템을 골라내어 결과창에 차곡차곡 쌓아줍니다.
실제정답은 게임 상에서 유저가 간 아이템 빌드입니다. 이전스템에서 예측한 y를 다음스템의 입력값으로 사용합니다.
![슬라이드0057](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/c03e5db8-ecc0-4642-9818-d7411de76858)

Tf.GradientTape : 미분값을 자동으로 계산해주고, 모든연산을 tape에 기록해줌. Gardient 역전파 자동미분기능도 제공
훈련과정은 teacher forcin을 사용할 것이디 떄문에x에서 더해 실제 아이템값(label)도 받아줍니다. 아래에 모델에도 같이 넣어줍니다.
![슬라이드0058](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/70152a74-409b-40dc-a1a2-1ee025bbe621)
![슬라이드0059](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/5116b21d-0c9a-43c6-ad35-e5df9c50e351)
![슬라이드0060](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/4a107090-269b-476e-a78d-190dc9946ad6)
![슬라이드0061](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/0d354ee8-2096-412c-bdf9-48cd1488bee7)

게임 화면 내 챔피언을 인식하여 아이템을 추천해주는 시스템
![슬라이드0062](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/787961a5-51d0-4be7-97a2-4dc6e561fec5)
![슬라이드0063](https://github.com/rohamvo/LOL-data-analysis/assets/117894782/7ce25ef7-143f-4b36-a725-825d2a94eee4)
